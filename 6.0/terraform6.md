## CHAPTER 6 모듈

> 테라폼으로 인프라와 서비스를 관리하면 시간이 지날수록 구성이 복잡해지고 관리하는 리소스가 늘어나게 된다.
> 테라폼의 구성파일과 디렉토리 구성에는 제약이 없기 때문에 단일 파일 구조상에서 지속적으로 업데이트할 수 있지만, 다음과 같은 문제가 발생

- 테라폼 구성에서 원하는 항목을 찾고 수정하는 것이 점점 어려워짐
- 리소스들 간의 연관 관계가 복잡할 수록 변경 작업의 영향도를 분석하기 위한 노력이 늘어남
- 개발/스테이징/프로덕션 환경으로 구분된 경우 비슷한 형태의 구성이 반복되어 업무 효율이 줄어듦
- 새로운 프로젝트를 구성하는 경우 기존 구성에서 취해야할 리소스 구성과 종속성 파악이 어려움

ROOT MODULE -> Terraform -> Provider -> INFRASTRUCTURE
ROOT MODULE -> Terraform -> Provider -> INFRASTRUCTURE

- **루트모듈** : 테라폼을 실행하고 프로비저닝하는 최상위 모듈
- **자식모듈** : 루트 모듈의 구성에서 호출되는 외부 구성 집합

`모듈은 테라폼 구성의 집합`
테라폼으로 관리하는 대상의 규모가 커지고 복잡해져 생긴 문제를 보완하고 관리 작업을 수월하게 하기 위한 방안으로 활용

- **관리성** : 모듈은 서로 연관있는 구성의 묶음. 원하는 구성 요소를 단위별로 쉽게 찾고 업데이트할 수 있다. 모듈은 다른 구성에서 쉽게 하나의 덩어리로 추가하거나 삭제할 수 있다. 또한 모듈이 업데이트되면 이 모듈을 사용하는 모든 구성에서 일관된 변경 작업을 진행할 수 있다.
- **캡슐활** : 테라폼 구성 내에서 각 모듈은 논리적으로 묶여져 독립적으로 프로비저닝 및 관리되며, 그 결과는 은닉성을 갖춰 필요한 항목만을 외부에 노출 시킨다.
- **재사용성** : 구성을 처음부터 작성하려면 시간과 노력이 필요하고 작성 중간에 디버깅과 오류를 수정하는 반복 작업이 필요하다. 하지만 테라폼 구성을 모듈화하면 이후 비슷한 르보지너잉에 이미 검증된 구성을 바로 사용할 수 있다.
- **일관성과 표준화** : 테라폼 구성 시 모듈을 활용하는 워크플로는 구성의 일관성을 제공하고 서로 다른 환경과 프로젝트에도 이미 검증된 모듈을 적용해 복잡한 구성과 보안 사고를 방지할 수 있다.
